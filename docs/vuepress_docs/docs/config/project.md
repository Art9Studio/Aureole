# Aureole Config
***
- Тип: **object**. Обязательны: `api_version`, `apps`. Наличие дополнительных свойств: **Недопустимо**.
  - `api_version`: Тип: **string**. Версия API. Версия API указывается для обратной совместимости при грядущих обновлениях продукта.
  - `test_run`: Тип: **boolean**. Значение по-умолчанию: **False**. Флаг тестового запуска сервера. Предназначен для запуска сервера в тестовом режиме. В тестовом режиме все HTTPS запросы будут проводиться в незащищенном режиме. Запуск в данном режиме предназначен только для тестирования сервера.
  - `service`: Тип: **object**. Сервисная конфигурация. Настройки, необходимые для нормального функционирования сервера Aureole. Обязательны: `storage`. Наличие дополнительных свойств: **Недопустимо**.
    - `sign_key`: Тип: **string**. Дополнительно: Ссылка на экземпляр плагина крипто-ключа. Внутренний сервисный ключ для подписи. Данный ключ един для всего сервера либо же для нескольких серверов и необходим для подписи промежуточных JWT. Промежуточные JWT используются для различного рода подтверждения действия со стороны пользователя':' сброса пароля, беспарольного логина черех Email, двухфакторной аутентификации. Минимальная длина: **1**.
    - `enc_key`: Тип: **string**. Дополнительно: Ссылка на экземпляр плагина крипто-ключа. Внутренний сервисный ключ для шифрования. Данный ключ един для всего сервера либо же для нескольких серверов и необходим для шифрования каких-либо данных, как например OTP для SMS двухфакторной аутентификации. Минимальная длина: **1**.
    - `storage`: Тип: **string**. Дополнительно: Ссылка на экземпляр плагина хранилища ключей. Сервисное хранилище Aureole. Данной хранилище используется Aureole для учета и инвалидации выданных им JWT. Минимальная длина: **1**.
  - `apps`: Тип: **array**. Перечисление приложений. Используется для указания конфигураций всех приложений, которые использует Aureole. Минимальное кол-во элементов: **1**.
    - **Элементы**: Тип: **object**. Конфигурация одного приложения. Используется для конфигурирования одного приложения. Обязательны: `name`, `authN`. Наличие дополнительных свойств: **Недопустимо**.
      - `name`: Тип: **string**. Имя приложения. Используется для идентификации конфигурации определенного приложения. Минимальная длина: **1**.
      - `host`: Тип: **string**. Дополнительно: Абсолютный URL-адрес. Значение по-умолчанию: **http://localhost:3000**. Хост, на котором работает приложение. Указывается в формате <протокол>://<хост>:<порт>. Если не указан протокол, то будет использован HTTP. Хост используется для формирования абсолютных маршрутов приложения.
      - `path_prefix`: Тип: **string**. Дополнительно: Относительный URL-адрес. Значение по-умолчанию: **/**. Префикс маршрута приложения. Префикс используется для образования пространства имен данного приложения. Должен быть уникальным в пределах перечисления.
      - `authZ`: Тип: **string**. Дополнительно: Ссылка на экземпляр плагина авторизатора. Ссылка на авторизатор. Имя авторизатора, который будет использовать это приложение.
      - `2fa`: Тип: **string**. Дополнительно: Ссылка на экземпляр плагина двухфакторной аутентификации. Ссылка на плагин двухваторной аутентификации. Имя плагина 2FA, который будет использовать это приложение.
      - `authN`: Тип: **array**. Перечисление конфигураций аутентификаторов. Используется для указания конфигураций всех аутентификаторов, которые используются в приложении. Каждый аутентификатор независим от других и должен использовать свои, уникальные в пределах приложения, маршруты. Минимальное кол-во элементов: **1**.
        - **Элементы**: См. [Authn](./authn.md).
  - `authZ`: Тип: **array**. Перечисление конфигураций авторизаторов. Используется для указания конфигураций всех авторизаторов, которые используются в проекте.
    - **Элементы**: См. [Authz](./authz.md).
  - `2fa`: Тип: **array**. Перечисление конфигураций плагинов двухфакторной аутентификации. Используется для указания конфигураций всех двухфакторных аутентификаций, которые используются в проекте.
    - **Элементы**: См. [2Fa](./2fa.md).
  - `storages`: Тип: **array**. Перечисление конфигураций хранилищ. Используется для указания конфигураций всех хранилищ, которые используются в проекте. Минимальное кол-во элементов: **1**.
    - **Элементы**: См. [Storage](./storage.md).
  - `key_storages`: Тип: **array**. Перечисление конфигураций хранилищ ключей. Используется для указания конфигураций всех хранилищ ключей, которые используются в проекте.
    - **Элементы**: См. [Kstorage](./kstorage.md).
  - `hashers`: Тип: **array**. Перечисление конфигураций хэшеров. Используется для указания конфигураций всех хэшеров, которые используются в проекте.
    - **Элементы**: См. [Hasher](./hasher.md).
  - `crypto_keys`: Тип: **array**. Перечисление конфигураций ключей. Используется для указания конфигураций всех ключей, которые используются в проекте.
    - **Элементы**: См. [CryptoKey](./crypto_key.md).
  - `senders`: Тип: **array**. Перечисление конфигураций отправителей. Используется для указания конфигураций всех отправителей, которые используются в проекте.
    - **Элементы**: См. [Sender](./sender.md).
  - `admin_plugins`: Тип: **array**. Перечисление конфигураций административных плагинов. Используется для указания конфигураций всех административных плагинов, которые используются в проекте. Административные плагины не несут какой-либо пользы конечным пользователям, а лишь предоставляют различные административные возможность для работы с Aureole.
    - **Элементы**: См. [AdminPlugin](./admin_plugin.md).
  ### Пример конфига
  ```yaml
  api_version: "0.1"
  
  service:
    internal_key: service
    storage: vault_store
  
  apps:
    - name: app
      authn:
        # array of authenticators
      authz:
        # authorizer config
  
  storages:
    # array of storages
  hashers:
    # array of hashers
  crypo_keys:
    # array of crypto keys
  senders:
    # array of senders
  admin_plugins:
    # array of admin plugins
  ```
