# Конфигурация авторизатора.
***
Описывает все свойства данного авторизатора. Данный плагин используется для авторизации пользователя и выдачи ему некого токена доступа, будь то jwt или сессионного токена. Плагин является встраиваемым, что позволяет комбинировать различные способы аутентификации и авторизации.
- Тип: **object**. Обязательны: [`name`]. Наличие дополнительных свойств: **Недопустимо**.
  - `name`: Тип: **string**. Дополнительно: Имя экземпляра плагина. Имя авторизатора. Имя используется для того, чтобы в дальнейшем ссылаться на данный авторизатор. Минимальная длина: **1**.
  - `path_prefix`: Тип: **string**. Дополнительно: Относительный URL-адрес. Значение по-умолчанию: **/**. Префикс маршрута авторизатора. Префикс используется для образования пространства имен данного авторизатора. Должен быть уникальным в пределах перечисления.
  ## Допустим один из вариантов конфига:
  ### Конфигурация jwt авторизатора.
  - Тип: **object**. Конфигурация jwt авторизатора. Служит для задания свойств авторизатора. Обязательны: [`type`, `config`]. Наличие дополнительных свойств: **Недопустимо**.
    - `type`: Константа: **jwt**. Тип авторизатора. Необходим, чтобы дать Aureole понять, какой из авторизаторов использовать.
    - `config`: Тип: **object**. Конфигурация авторизатора. Описывает все свойства данного авторизатора. Обязательны: [`sign_key`, `verify_keys`, `jti`, `payload`]. Наличие дополнительных свойств: **Недопустимо**.
      - `iss`: Тип: **string**. Значение по-умолчанию: **Aureole Server**. Идентификатор стороны, генерирующей токен. Чувствительная к регистру строка или URI, которая является уникальным идентификатором стороны, генерирующей токен. Минимальная длина: **1**.
      - `sub`: Тип: **boolean**. Значение по-умолчанию: **False**. Флаг наличия идентификатора субъекта. Определяет, необходимо ли Aureole добавить в токен уникальных идентификатор стороны, о которой содержится информация в данной токене.
      - `aud`: Тип: **array**. Значение по-умолчанию: **[]**. Массив получателей токена. Массив чувствительных к регистру строк или URI, являющийся списком получателей данного токена. Элементы должны быть уникальными.
        - **Элементы**: Тип: **string**.
      - `nbf`: Тип: **integer**. Значение по-умолчанию: **0**. Количество времени, после котрого токена станет валидным. Количество времени, после котрого токена станет валидным после его создания. Минимальное значение: **0**.
      - `iat`: Тип: **boolean**. Значение по-умолчанию: **False**. Флаг наличия времени создания токена. Определяет, необходимо ли Aureole добавить в токен время его создания.
      - `jti`: Тип: **string**. Уникальный идентификатор токен. Строка, определяющая уникальный идентификатор токена.
      - `access_bearer`: Допускаются следующие значения: [`cookie`, `header`, `both`]. Значение по-умолчанию: **header**. Имя носителя токена access-токена. Определяет, каким образом будет доставляться access-токен.
      - `refresh_bearer`: Допускаются следующие значения: [`cookie`, `body`, `both`]. Значение по-умолчанию: **cookie**. Имя носителя токена refresh-токена. Определяет, каким образом будет доставляться refresh-токен.
      - `sign_key`: Тип: **string**. Дополнительно: Ссылка на экземпляр плагина крипто-ключа. Ссылка на приватный крипто-ключ. Имя крипто-ключа, который должен использоваться для подписи токенов. Минимальная длина: **1**.
      - `verify_keys`: Тип: **array**. Массив ссылок на публичные крипто-ключи. Имена крипто-ключей, которые могут быть использованы для проверки подписи токена. Минимальное кол-во элементов: **1**. Элементы должны быть уникальными.
        - **Элементы**: Тип: **string**. Дополнительно: Ссылка на экземпляр плагина крипто-ключа. Минимальная длина: **1**.
      - `access_exp`: Тип: **integer**. Дополнительно: Единицы измерения:  s. Значение по-умолчанию: **900**. Время жизни access-токена. Время, на протяжении которого access-токен будет валидным. Отсчет начинается с момента формирования токена. Минимальное значение: **0**.
      - `refresh_exp`: Тип: **integer**. Дополнительно: Единицы измерения:  s. Значение по-умолчанию: **7890000**. Время жизни refresh-токена. Время, на протяжении которого refresh-токен будет валидным. Отсчет начинается с момента формирования токена. Минимальное значение: **0**.
      - `refresh_url`: Тип: **string**. Дополнительно: Относительный URL-адрес. Значение по-умолчанию: **/refresh**. Маршрут обновления токена. Определяет маршрут, по которому будет производится обновления истекших токенов. Минимальная длина: **1**.
      - `payload`: Тип: **string**. Дополнительно: Путь к файлу, Расширение файла:  json. Путь к файлу полезной нагрузки. Определяет, какой файл использовать в качестве шаблона для формирования полезной нагрузки токена. Минимальная длина: **1**.
      - `native_queries`: Тип: **string**. Дополнительно: Путь к файлу, Расширение файла:  yaml,yml. Значение по-умолчанию: ****. Путь к файлу запросов. Определяет, какой файл использовать в качестве перечисления дополнительных запросов к БД.
  ### Конфигурация session авторизатора.
  - Тип: **object**. Конфигурация session авторизатора. Служит для задания свойств авторизатора. Обязательны: [`type`, `config`]. Наличие дополнительных свойств: **Недопустимо**.
    - `type`: Константа: **session**. Тип авторизатора. Необходим, чтобы дать Aureole понять, какой из авторизаторов использовать.
    - `config`: Тип: **object**. Конфигурация авторизатора. Описывает все свойства данного авторизатора. Обязательны: [`collection`, `storage`, `domain`]. Наличие дополнительных свойств: **Недопустимо**.
      - `collection`: Тип: **string**. Дополнительно: Ссылка на экземпляр плагина коллекции. Ссылка на коллекцию сессий. Имя коллекции, которая будет использоваться для хранения сессий пользователей. Минимальная длина: **1**.
      - `storage`: Тип: **string**. Дополнительно: Ссылка на экземпляр плагина хранилища. Ссылка на хранилище данных. Имя хранилища, которое будет использоваться данным аутентификатором для взаимодейтсвия с коллекциями. Минимальная длина: **1**.
      - `domain`: Тип: **string**. Домен. Домен, на котором доступны наши куки. Минимальная длина: **1**.
      - `path`: Тип: **string**. Дополнительно: Относительный URL-адрес. Значение по-умолчанию: ****. URL-префикс пути. Куки будут доступны для страниц под этим путём.
      - `max_age`: Тип: **integer**. Значение по-умолчанию: **3600**. Срок действия куки. Определяет срок действия куки с момента их создания. Минимальное значение: **0**.
      - `secure`: Тип: **boolean**. Значение по-умолчанию: **False**. Флаг использования HTTPS. Определяет, будет ли при передачи куки использоваться защенное соединение.
      - `http_only`: Тип: **boolean**. Значение по-умолчанию: **False**. Флаг запрета доступа к куки. Определяет, будет ли клиент иметь возможность манипулировать с куки.
      - `same_site`: Тип: **string**. Значение по-умолчанию: ****. Конфигурации параметра samesite. Определяет, каким образом для защиты от XSRF-аттак будет использоваться параметр samesite.
      - `clean_interval`: Тип: **integer**. Значение по-умолчанию: **86400**. Интервал очистки сессий. Интервал запуска процесса очистки устаревших сессий из БД. Минимальное значение: **0**.
  ### Определения:
  ### SessionCollection
  - `type`: Константа: **session**. Тип коллекции. Необходим, чтобы дать Aureole понять, какую из коллекций использовать.
  - `config`: Тип: **object**. Конфигурация коллекции. Описывает все свойства данной коллекции. Обязательны: [`name`, `pk`, `fields_map`]. Наличие дополнительных свойств: **Недопустимо**.
    - `name`: Тип: **string**. Дополнительно: Имя экземпляра плагина. Имя таблицы в БД. Указывается имя таблицы, с которой будет взаимодействовать данная коллекция. Минимальная длина: **1**.
    - `pk`: Тип: **string**. Ссылка на первичный ключ. Указывается имя поля, которое является первичным ключом таблицы. Имя поля должно быть описано в сопоставлении полей. Минимальная длина: **1**.
    - `fields_map`: Тип: **object**. Сопоставление полей. Перечисление сопоставлений данных с названиями полей в таблице БД. Обязательны: [`id`, `session_token`, `expiration`]. Наличие дополнительных свойств: **Недопустимо**.
      - `id`: Тип: **string**. Сопоставление идентификатора записи. Описывает, как называется поле в таблице БД, которое является идентификатором записи. Минимальная длина: **1**.
      - `session_token`: Тип: **string**. Сопоставление сессионного токена. Описывает, как называется поле в таблице БД, которое токеном сессии. Минимальная длина: **1**.
      - `expiration`: Тип: **string**. Сопоставление времени истечения токена. Описывает, как называется поле в таблице БД, которое является временем окончания действия токена. Минимальная длина: **1**.
