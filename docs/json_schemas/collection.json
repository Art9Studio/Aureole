{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "uuid": "8acfb183-da98-4c9c-a517-f37b319cba4f",
  "additionalProperties": false,
  "required": [
    "name"
  ],
  "properties": {
    "name": {
      "type": "string",
      "uuid": "bcfb61a5-7df4-4d9c-9aa0-a95a89e49213",
      "minLength": 1,
      "metatags": "@plugin_name"
    },
    "parent": {
      "type": "string",
      "uuid": "921d1ef6-80f6-478b-a59d-44226f0e125c",
      "minLength": 1,
      "metatags": "@collection_ref"
    }
  },
  "oneOf": [
    {
      "properties": {
        "type": {
          "const": "identity",
          "uuid": "c809614e-8bd1-45c9-9475-13b82508cd0b"
        },
        "config": {
          "type": "object",
          "uuid": "ff53ffd8-4bd8-4223-8f53-ff7a8fa98a7c",
          "additionalProperties": false,
          "required": [
            "name",
            "pk",
            "fields_map"
          ],
          "properties": {
            "name": {
              "type": "string",
              "uuid": "85997f0f-b0b0-43c5-9ebe-bb3d7adb4da0",
              "minLength": 1,
              "metatags": "@plugin_name"
            },
            "pk": {
              "type": "string",
              "uuid": "a87b990f-43bb-4c60-9dab-6e0fd99eab7d",
              "minLength": 1
            },
            "fields_map": {
              "type": "object",
              "uuid": "ff8b3222-a094-416e-a989-5bf4bc41d02a",
              "additionalProperties": false,
              "properties": {
                "id": {
                  "type": "string",
                  "uuid": "daa4f1eb-a2f2-4e32-9007-3f370f057ac8",
                  "minLength": 1
                },
                "username": {
                  "type": "string",
                  "uuid": "288197cf-2778-4c35-b638-b0d99aa7ae81",
                  "minLength": 1
                },
                "phone": {
                  "type": "string",
                  "uuid": "83fe65e3-cb4d-48fd-adcc-ce919fa36481",
                  "minLength": 1
                },
                "email": {
                  "type": "string",
                  "uuid": "d90e58e7-8fa7-47e3-b60f-b8e597f109e2",
                  "minLength": 1
                },
                "is_active": {
                  "uuid": "be905993-6238-44cb-b2a2-4f9df8139236",
                  "anyOf": [
                    {
                      "type": "string",
                      "minLength": 1
                    },
                    {
                      "const": "no"
                    }
                  ]
                },
                "created": {
                  "uuid": "77435be6-2fba-4b6d-9caa-cc9663acc0ba",
                  "anyOf": [
                    {
                      "type": "string",
                      "minLength": 1
                    },
                    {
                      "const": "no"
                    }
                  ]
                },
                "email_verified": {
                  "uuid": "c6696890-8797-480d-8b5d-7fd48bfb35bb",
                  "anyOf": [
                    {
                      "type": "string",
                      "minLength": 1
                    },
                    {
                      "const": "no"
                    }
                  ]
                },
                "phone_verified": {
                  "uuid": "60cbc26b-124a-4711-9ae5-85c84c399e56",
                  "anyOf": [
                    {
                      "type": "string",
                      "minLength": 1
                    },
                    {
                      "const": "no"
                    }
                  ]
                }
              },
              "anyOf": [
                {
                  "required": [
                    "id"
                  ]
                },
                {
                  "required": [
                    "username"
                  ]
                },
                {
                  "required": [
                    "phone"
                  ]
                },
                {
                  "required": [
                    "email"
                  ]
                }
              ],
              "patternProperties": {
                ".+": {
                  "uuid": "c907606c-137d-49d3-8256-3f0f20d7440f",
                  "oneOf": [
                    {
                      "type": "string",
                      "uuid": "f2628ae8-aceb-4069-92f9-58f350fe7758",
                      "minLength": 1
                    },
                    {
                      "type": "object",
                      "uuid": "439f41c8-577b-4f0c-b272-b31657ba2421",
                      "additionalProperties": false,
                      "properties": {
                        "name": {
                          "type": "string",
                          "uuid": "cab08e1d-ed3b-4565-a459-544d34497982",
                          "minLength": 1
                        },
                        "type": {
                          "enum": [
                            "boolean",
                            "int",
                            "float",
                            "string"
                          ],
                          "uuid": "1c097b21-175e-4736-a24c-ced5459849aa"
                        },
                        "default": {
                          "uuid": "97be0213-dc08-4413-898c-fbeeceeab68e",
                          "not": {
                            "type": "null"
                          }
                        }
                      },
                      "required": [
                        "name"
                      ]
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    {
      "properties": {
        "type": {
          "const": "oauth2",
          "uuid": "cdb6bb58-e603-49a2-b976-b1f3787c9efb"
        },
        "config": {
          "type": "object",
          "uuid": "47206427-4d91-47e9-92ad-925ca4d5c7a5",
          "additionalProperties": false,
          "required": [
            "name",
            "pk",
            "fields_map"
          ],
          "properties": {
            "name": {
              "type": "string",
              "uuid": "84287a2a-0267-4bdc-bb78-132ca0f0026d",
              "minLength": 1,
              "metatags": "@plugin_name"
            },
            "pk": {
              "type": "string",
              "uuid": "f3643677-f4ad-4c22-a2f5-4d5eb4f19faf",
              "minLength": 1
            },
            "fields_map": {
              "type": "object",
              "uuid": "a6efde73-f8d3-4a0b-ad09-0fcf936fc3b8",
              "additionalProperties": false,
              "required": [
                "id",
                "social_id",
                "email",
                "provider",
                "user_data",
                "user_id"
              ],
              "properties": {
                "id": {
                  "type": "string",
                  "uuid": "2a9b6cec-5fa4-4837-ab60-0d0086dabdc4",
                  "minLength": 1
                },
                "social_id": {
                  "type": "string",
                  "uuid": "20f8a69c-ca7d-4b6a-88e5-ea06cb6227bc",
                  "minLength": 1
                },
                "email": {
                  "type": "string",
                  "uuid": "3ce6bd2e-5d6c-41fa-8508-0d63495a560d",
                  "minLength": 1
                },
                "provider": {
                  "type": "string",
                  "uuid": "e340c40b-fe4b-4a02-bdc4-c1dc0f354520",
                  "minLength": 1
                },
                "user_data": {
                  "type": "string",
                  "uuid": "6b77de72-2a9a-42a3-b7a1-ef92dc42eb4c",
                  "minLength": 1
                },
                "user_id": {
                  "type": "string",
                  "uuid": "a0851fb3-7e7a-401e-b946-0ee4267a4975",
                  "minLength": 1
                }
              }
            }
          }
        }
      }
    },
    {
      "$ref": "../../plugins/authn/pwbased/schema.json#/definitions/PwbasedCollection"
    },
    {
      "$ref": "../../plugins/authz/session/schema.json#/definitions/SessionCollection"
    },
    {
      "$ref": "../../plugins/authn/phone/schema.json#/definitions/PhoneOtpCollection"
    },
    {
      "$ref": "../../plugins/authn/pwbased/schema.json#/definitions/PasswordResetCollection"
    },
    {
      "$ref": "../../plugins/authn/email/schema.json#/definitions/EmailLinkCollection"
    },
    {
      "$ref": "../../plugins/authn/pwbased/schema.json#/definitions/EmailVerificationCollection"
    }
  ]
}